<!DOCTYPE html>
<html>
    <head>
        <title>Leaderboard</title>
    </head>
    <body>
        <h2>Leaderboard</h2>
        <table id="leaderboard" border="1">
            <tr><th>Time Stamp</th><th>Player</th><th>Score</th></tr>
        </table>

        <script>
            const url = "https://script.google.com/macros/s/AKfycbw6atWDw5sUQSQHWNDISCXgyVVxG85Zo3OqvCqOz2B4tZDZIqdc4XEkjHHjj2lsql99/exec";

            fetch(url)
                .then(res => res.json())
                .then(data => {
                console.log("Fetched data:", data); // ðŸ‘ˆ See what you actually got
                const table = document.getElementById("leaderboard");

                data.forEach((row) => {
                const tr = document.createElement("tr");
                tr.innerHTML = `
                    <td>${row.timestamp}</td>
                    <td>${row.username}</td>
                    <td>${row.score}</td>`;
                table.appendChild(tr);
                });
            }).catch(err => console.error("Error:", err));
            setInterval(() => {
            fetch(url)
                .then(res => res.json())
                .then(data => {
                const table = document.getElementById("leaderboard");
                // Clear the table (keep headers)
                table.innerHTML = "<tr><th>Time Stamp</th><th>Player</th><th>Score</th></tr>";
                data.forEach(row => {
                const tr = document.createElement("tr");
                tr.innerHTML = `
                    <td>${new Date(row.timestamp).toLocaleString()}</td>
                    <td>${row.username}</td>
                    <td>${row.score}</td>`;
                table.appendChild(tr);
                });
            }).catch(err => console.error("Error refreshing leaderboard:", err));
            }, 100); // refresh every 0.1 second
        </script>
    </body>
</html>